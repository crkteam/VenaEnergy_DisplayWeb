(function(){var e={660:function(e,t,o){var n={"./icon-type-1.svg":3375,"./icon-type-2.svg":4348,"./icon-type-3.svg":3821};function a(e){var t=r(e);return o(t)}function r(e){if(!o.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=r,e.exports=a,a.id=660},2290:function(e,t,o){"use strict";var n=o(5130),a=o(6768);const r={class:"relative w-full h-full overflow-hidden"};function i(e,t,o,n,i,l){const s=(0,a.g2)("BottomLayer"),c=(0,a.g2)("TopLayer");return(0,a.uX)(),(0,a.CE)("div",r,[(0,a.bF)(s,{class:"absolute top-0 left-0 w-full h-full z-0"}),(0,a.bF)(c,{class:"absolute top-0 left-0 w-full h-full z-10 pointer-events-none"})])}o(4114),o(8111),o(7588);var l=o(144),s=o(8371),c=(o(1701),o(8776)),p=o(3191);class u{createCamera(e,t){const o=e.x/e.y,n=10,a=new s.qUd(n*o/-2,n*o/2,n/2,n/-2,.1,1e3);return a.position.set(t.x,t.y,t.z),a.lookAt(0,0,0),a}createRenderer(e){const t=new c.JeP({antialias:!0,alpha:!0});return t.setSize(e.x,e.y),t.shadowMap.enabled=!0,t.shadowMap.type=s.Wk7,t}addLight(e){const t=new s.$p8(16777215,.5);e.add(t);const o=new s.ZyN(16777215,1.25);o.position.set(-1.25,5.5,5),o.lookAt(0,0,0),o.castShadow=!0,o.shadow.mapSize.width=2048,o.shadow.mapSize.height=2048,o.shadow.camera.left=-12,o.shadow.camera.right=12,o.shadow.camera.top=12,o.shadow.camera.bottom=-12,o.shadow.camera.near=1,o.shadow.camera.far=30,e.add(o);const n=new s.ZyN(16777215,.35);n.position.set(2.5,5.5,-2.5),n.lookAt(0,0,0),e.add(n)}createFBX(e,t){return new Promise((o,n)=>{const a=new p.w,r=new s.Tap,i=r.load("./model/basetexture.jpg"),l=r.load("./model/floortexture.jpg"),c=r.load("./model/unchangetexture.jpg");a.load("./model/Area_"+e+".fbx",n=>{n.traverse(e=>{if(e.castShadow=!0,e.receiveShadow=!0,e instanceof s.eaF){const t=Array.isArray(e.material)?e.material:[e.material],o=t.map(e=>"lambert1"===e.name?new s._4j({color:16777215,map:l}):"lambert2"===e.name?new s._4j({map:c}):new s._4j({color:16777215,map:i}));e.material=Array.isArray(e.material)?o:o[0]}}),n.position.set(t.x,t.y,t.z);const a=.075;n.scale.set(a,a,a),n.userData.type=e,o(n)},void 0,e=>{console.error("載入 FBX 時發生錯誤:",e),n(e)})})}}var v=o(4968);const d=.5,h=.3,f=.1;var w=(0,a.pM)({__name:"BottomLayer",setup(e){const t=(0,l.KR)(null);let o,n,r,i,c,p=[],w=new s.Pq0(5.5,6.5,10),y=new s.Pq0(5.5,6.5,10),b={x:0,y:0},g=!1,m=new s.Pq0(0,0,0),k=!0;const x=new s.Pq0(5.5,15,10),L=new s.Pq0(0,5,2.5),F=[{type:"A",position:new s.Pq0(-2.5,0,-1.5),cameraPosition:new s.Pq0(-.5,4.5,7.5)},{type:"B",position:new s.Pq0(-2.5,0,4.5),cameraPosition:new s.Pq0(-2.5,6.5,12)},{type:"C",position:new s.Pq0(4,0,-1.5),cameraPosition:new s.Pq0(4,6.5,8)},{type:"D",position:new s.Pq0(5,0,4.5),cameraPosition:new s.Pq0(5,6.5,12)}],P=F.reduce((e,t)=>(e[t.type]={position:t.cameraPosition,lookAt:t.position},e),{});(0,a.sV)(()=>{A(),R()}),(0,a.xo)(()=>{window.removeEventListener("resize",D),window.removeEventListener("keydown",j),t.value?.removeEventListener("click",B),t.value?.removeEventListener("mousemove",_),r&&r.dispose(),v.Ay.killTweensOf(n.position),v.Ay.killTweensOf(m)});const A=async()=>{if(!t.value)return;i=new s.tBo,c=new s.I9Y,o=new s.Z58,o.background=new s.Q1f(15791352);let e=new u,a=new s.I9Y(t.value.clientWidth,t.value.clientHeight);n=e.createCamera(a,x),m.copy(L),r=e.createRenderer(a),t.value.appendChild(r.domElement),e.addLight(o),await E(e),C(),window.addEventListener("resize",D),window.addEventListener("keydown",j),t.value.addEventListener("click",B),t.value.addEventListener("mousemove",_)},C=()=>{k=!0,v.Ay.to(n.position,{x:w.x,y:w.y,z:w.z,duration:2,ease:"power2.out",onComplete:()=>{k=!1}}),v.Ay.to(m,{x:0,y:0,z:0,duration:2.5,ease:"power2.out"})},E=async e=>{const t=F.map(t=>e.createFBX(t.type,t.position)),n=await Promise.all(t);n.forEach(e=>{o.add(e),p.push(e)})},_=e=>{if(!t.value)return;if(k)return;const o=t.value.getBoundingClientRect(),n=(e.clientX-o.left)/o.width*2-1,a=-(e.clientY-o.top)/o.height*2+1,r=g?h:d;b.x=n*r,b.y=a*r},B=e=>{if(!t.value)return;if(k)return;const o=t.value.getBoundingClientRect();c.x=(e.clientX-o.left)/o.width*2-1,c.y=-(e.clientY-o.top)/o.height*2+1,i.setFromCamera(c,n);const a=i.intersectObjects(p,!0);if(a.length>0){let e=a[0].object;while(e.parent&&!e.userData.type)e=e.parent;O(e)}},O=e=>{const t=e.userData.type;console.log("點擊了:",t),G(t)},G=e=>{const t=P[e];t?(g=!0,y=t.position.clone(),v.Ay.killTweensOf(n.position),v.Ay.killTweensOf(m),v.Ay.to(n.position,{x:t.position.x,y:t.position.y,z:t.position.z,duration:1,ease:"power2.inOut"}),v.Ay.to(m,{x:t.lookAt.x,y:t.lookAt.y,z:t.lookAt.z,duration:1,ease:"power2.inOut"}),console.log(`相機鎖定到 Area ${e}`)):console.warn(`找不到 area ${e} 的相機配置`)},z=()=>{g=!1,v.Ay.killTweensOf(n.position),v.Ay.killTweensOf(m),v.Ay.to(n.position,{x:w.x,y:w.y,z:w.z,duration:1,ease:"power2.inOut"}),v.Ay.to(m,{x:0,y:0,z:0,duration:1,ease:"power2.inOut"}),console.log("相機解鎖,恢復到初始視角")},j=e=>{"Escape"===e.key&&g&&z()},R=()=>{if(requestAnimationFrame(R),!k){const e=g?y:w,t=e.x+b.x,o=e.y+b.y;n.position.x+=(t-n.position.x)*f,n.position.y+=(o-n.position.y)*f}n.lookAt(m),r.render(o,n)},D=()=>{if(!t.value)return;const e=t.value.clientWidth/t.value.clientHeight,o=10;n instanceof s.qUd&&(n.left=o*e/-2,n.right=o*e/2,n.top=o/2,n.bottom=o/-2,n.updateProjectionMatrix()),r.setSize(t.value.clientWidth,t.value.clientHeight)};return(e,o)=>((0,a.uX)(),(0,a.CE)("div",{ref_key:"container",ref:t,class:"w-full h-full"},null,512))}});const y=w;var b=y,g=o(4232),m=o.p+"img/sun.03ff91cd.svg";const k={class:"absolute p-[1.25%] top-[3%] left-[1.6%] w-[19.5%] h-[17%] bg-[#fafafa50] backdrop-blur-sm rounded-xl flex flex-row justify-between"},x={class:"flex flex-col justify-between"},L={class:"text-[1.2vh] tracking-wider text-c-black/80"},F={class:"text-[1.5vh] text-c-black/80"},P={class:"text-[2.5vh] tracking-wider font-bold text-c-black/80"};var A=(0,a.pM)({__name:"WeatherBlock",setup(e){const t=(0,l.KR)({date:"2025.01.01",day:"(一)",location:"桃園場",temp:27,condition:"Sunny"});return(e,o)=>((0,a.uX)(),(0,a.CE)("div",k,[(0,a.Lk)("div",x,[(0,a.Lk)("div",null,[(0,a.Lk)("div",L,(0,g.v_)(t.value.date)+" "+(0,g.v_)(t.value.day),1),(0,a.Lk)("div",F,(0,g.v_)(t.value.location),1)]),(0,a.Lk)("span",P,(0,g.v_)(t.value.temp)+"°C",1)]),o[0]||(o[0]=(0,a.Lk)("img",{src:m,alt:"sun",class:"w-auto h-[87.5%]"},null,-1))]))}});const C=A;var E=C,_=o.p+"img/light.146a0573.svg";const B={class:"p-[0.5vh] flex flex-col justify-between"},O={class:"flex items-center gap-[0.5vh]"},G={class:"text-[1.85vh] font-bold tracking-wide text-c-black/65"},z={class:"flex items-center gap-[1vh]"},j={class:"text-[1.5vh] text-c-black/40"};var R=(0,a.pM)({__name:"ShortDataCard",props:{value:{},title:{}},setup(e){return(e,t)=>((0,a.uX)(),(0,a.CE)("div",B,[(0,a.Lk)("div",O,[(0,a.Lk)("span",G,(0,g.v_)(e.value.toString()),1),t[0]||(t[0]=(0,a.Lk)("span",{class:"text-[1.15vh] text-c-black/60"},"(MWp)",-1))]),(0,a.Lk)("div",z,[t[1]||(t[1]=(0,a.Lk)("img",{src:_,class:"w-[1.35vh] h-auto",alt:""},null,-1)),(0,a.Lk)("div",j,(0,g.v_)(e.title),1)])]))}});const D=R;var S=D;const q={class:"absolute top-[2.5vh] right-[2.5vh] w-[30%] h-[25%] p-[1.5vh] bg-gradient-to-b from-[#9FBFD3]/30 to-[#94A1BF]/30 rounded-[1.5vh]"},T={class:"grid grid-cols-2 grid-rows-2 gap-[1.5vh] h-full"};var M=(0,a.pM)({__name:"ShortDataBlock",setup(e){return(e,t)=>((0,a.uX)(),(0,a.CE)("div",q,[(0,a.Lk)("div",T,[(0,a.bF)(S,{value:"287",title:"PV今日發電量"}),(0,a.bF)(S,{value:"287",title:"儲能今日放電量"}),(0,a.bF)(S,{value:"287",title:"儲能總放電量"}),(0,a.bF)(S,{value:"287",title:"PV總發電量"})])]))}});const X=M;var V=X;const W={class:"flex flex-row items-center gap-[0.8vh]"},U=["src"],$={class:"text-black/40 text-[1.5vh]"};var H=(0,a.pM)({__name:"TitleBlock",props:{left:{},top:{},title:{},type:{}},setup(e){return(e,t)=>((0,a.uX)(),(0,a.CE)("div",{class:"absolute w-[14.3%] h-[7.1%] hover:h-[13.1%] hover:bg-[#ffffff] transition-all pointer-events-auto bg-[#ffffff]/65 backdrop-blur-[0.25vh] rounded-[1.5vh] flex flex-col justify-center gap-[10%] p-[1%] group",style:(0,g.Tr)({left:`${e.left}%`,top:`${e.top}%`})},[t[0]||(t[0]=(0,a.Lk)("div",{class:"hidden group-hover:flex transition-all flex-row items-center gap-[0.65vh]"},[(0,a.Lk)("div",{class:"font-bold text-[2.25vh] text-black/65"},"287"),(0,a.Lk)("div",{class:"text-[1.35vh] text-black/40"},"(kW)")],-1)),(0,a.Lk)("div",W,[(0,a.Lk)("img",{src:o(660)(`./icon-type-${e.type}.svg`),class:"h-[2.5vh] w-auto",alt:""},null,8,U),(0,a.Lk)("div",$,(0,g.v_)(e.title),1)])],4))}});const K=H;var N=K,Y=(o(2489),o(1010)),Z=o(9064);const I={class:"flex items-center gap-[2vh] mb-[1vh] text-white text-[1.4vh]"},J={class:"flex items-center gap-[0.5vh] bg-white/10 rounded-[0.5vh] px-[1vh] py-[0.5vh]"},Q={class:"flex items-center gap-[1.5vh]"},ee={class:"flex items-center gap-[0.5vh] cursor-pointer hover:opacity-80 transition-opacity"},te={class:"flex items-center gap-[0.5vh] cursor-pointer hover:opacity-80 transition-opacity"},oe={class:"flex items-center gap-[0.5vh] cursor-pointer hover:opacity-80 transition-opacity"},ne={class:"flex items-center gap-[0.5vh] cursor-pointer hover:opacity-80 transition-opacity"},ae={class:"h-[calc(100%-4vh)]"};var re=(0,a.pM)({__name:"ChartBlock",props:{bottom:{}},setup(e){Z.t1.register(Z.PP,Z.kc,Z.E8,Z.hE,Z.m_,Z.s$);const t=(0,l.KR)("day"),o=(0,l.KR)({todayGeneration:!0,newPvGeneration:!0,pvGeneration:!0,storageGeneration:!0}),r={labels:["01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22"],newPvGeneration:[25,35,20,15,40,30,20,25,15,20,25,30,25,25,20,25,25,30,30,35,30,35],pvGeneration:[15,25,15,15,25,25,15,15,15,15,15,25,25,15,15,15,20,20,25,25,25,25],storageGeneration:[10,15,10,10,15,15,10,10,10,10,10,15,15,10,10,10,15,15,15,15,15,15]},i={labels:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],newPvGeneration:[550,620,680,720,800,850,900,880,820,750,650,580],pvGeneration:[350,420,480,520,600,650,700,680,620,550,450,380],storageGeneration:[250,320,380,420,500,550,600,580,520,450,350,280]},s=(0,a.EW)(()=>{const e="day"===t.value?r:i,n=[];return o.value.newPvGeneration&&n.push({label:"new pv 發電量",data:e.newPvGeneration,backgroundColor:"#90CAE1",borderRadius:n.length===Object.values(o.value).filter(Boolean).length-1?{topLeft:4,topRight:4}:{topLeft:0,topRight:0},borderSkipped:!1}),o.value.pvGeneration&&n.push({label:"pv 發電量",data:e.pvGeneration,backgroundColor:"#B8DBE8",borderRadius:n.length===Object.values(o.value).filter(Boolean).length-1?{topLeft:4,topRight:4}:{topLeft:0,topRight:0},borderSkipped:!1}),o.value.storageGeneration&&n.push({label:"儲能發電量",data:e.storageGeneration,backgroundColor:"#E8C4B8",borderRadius:{topLeft:4,topRight:4},borderSkipped:!1}),{labels:e.labels,datasets:n}}),c=(0,a.EW)(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{enabled:!0,mode:"index",intersect:!1}},scales:{x:{stacked:!0,grid:{display:!1},ticks:{color:"#FFFFFF",font:{size:10}},border:{display:!1}},y:{stacked:!0,beginAtZero:!0,max:"day"===t.value?100:3e3,grid:{color:"rgba(255, 255, 255, 0.1)",drawBorder:!1},ticks:{color:"#FFFFFF",stepSize:"day"===t.value?20:500,font:{size:10},callback:function(e){return e+" kwh"}},border:{display:!1}}}}));return(e,r)=>((0,a.uX)(),(0,a.CE)("div",{class:"pointer-events-auto absolute left-[1.9%] w-[84.5%] h-[26.8%] rounded-[1.5vh] bg-gradient-to-b from-[#9FBFD3]/30 to-[#94A1BF]/30 backdrop-blur-[0.25vh] p-[1vh]",style:(0,g.Tr)({bottom:`${e.bottom}%`})},[(0,a.Lk)("div",I,[(0,a.Lk)("div",J,[(0,a.Lk)("button",{onClick:r[0]||(r[0]=e=>t.value="day"),class:(0,g.C4)(["px-[1vh] py-[0.3vh] rounded-[0.3vh] transition-colors","day"===t.value?"bg-[#5BC4D4] text-white":"text-white/60 hover:text-white"])}," 日 ",2),(0,a.Lk)("button",{onClick:r[1]||(r[1]=e=>t.value="year"),class:(0,g.C4)(["px-[1vh] py-[0.3vh] rounded-[0.3vh] transition-colors","year"===t.value?"bg-[#5BC4D4] text-white":"text-white/60 hover:text-white"])}," 年 ",2)]),(0,a.Lk)("div",Q,[(0,a.Lk)("label",ee,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":r[2]||(r[2]=e=>o.value.todayGeneration=e),class:"w-[1.5vh] h-[1.5vh] accent-[#5BC4D4]"},null,512),[[n.lH,o.value.todayGeneration]]),r[6]||(r[6]=(0,a.Lk)("span",null,"今日發電量",-1))]),(0,a.Lk)("label",te,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":r[3]||(r[3]=e=>o.value.newPvGeneration=e),class:"w-[1.5vh] h-[1.5vh] accent-[#90CAE1]"},null,512),[[n.lH,o.value.newPvGeneration]]),r[7]||(r[7]=(0,a.Lk)("span",null,"new pv 發電量",-1))]),(0,a.Lk)("label",oe,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":r[4]||(r[4]=e=>o.value.pvGeneration=e),class:"w-[1.5vh] h-[1.5vh] accent-[#B8DBE8]"},null,512),[[n.lH,o.value.pvGeneration]]),r[8]||(r[8]=(0,a.Lk)("span",null,"pv 發電量",-1))]),(0,a.Lk)("label",ne,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":r[5]||(r[5]=e=>o.value.storageGeneration=e),class:"w-[1.5vh] h-[1.5vh] accent-[#E8C4B8]"},null,512),[[n.lH,o.value.storageGeneration]]),r[9]||(r[9]=(0,a.Lk)("span",null,"儲能發電量",-1))])])]),(0,a.Lk)("div",ae,[(0,a.bF)((0,l.R1)(Y.yP),{data:s.value,options:c.value},null,8,["data","options"])])],4))}});const ie=re;var le=ie;const se={class:"relative"};var ce=(0,a.pM)({__name:"TopLayer",setup(e){return(e,t)=>((0,a.uX)(),(0,a.CE)("div",se,[(0,a.bF)(E),(0,a.bF)(V),(0,a.bF)(N,{left:5,top:43,title:"PV",type:1}),(0,a.bF)(N,{left:35,top:76,title:"ESS",type:2}),(0,a.bF)(N,{left:63,top:37,title:"new-PV",type:1}),(0,a.bF)(N,{left:43.7,top:17.1,title:"GRID",type:3}),(0,a.bF)(le,{bottom:-20})]))}});const pe=ce;var ue=pe,ve=(0,a.pM)({name:"App",components:{TopLayer:ue,BottomLayer:b}}),de=o(1241);const he=(0,de.A)(ve,[["render",i]]);var fe=he;(0,n.Ef)(fe).mount("#ve-app")},3375:function(e,t,o){"use strict";e.exports=o.p+"img/icon-type-1.4805375f.svg"},3821:function(e,t,o){"use strict";e.exports=o.p+"img/icon-type-3.2b1e9f11.svg"},4348:function(e,t,o){"use strict";e.exports=o.p+"img/icon-type-2.adb5a82c.svg"}},t={};function o(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,o),r.exports}o.m=e,function(){var e=[];o.O=function(t,n,a,r){if(!n){var i=1/0;for(p=0;p<e.length;p++){n=e[p][0],a=e[p][1],r=e[p][2];for(var l=!0,s=0;s<n.length;s++)(!1&r||i>=r)&&Object.keys(o.O).every(function(e){return o.O[e](n[s])})?n.splice(s--,1):(l=!1,r<i&&(i=r));if(l){e.splice(p--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var p=e.length;p>0&&e[p-1][2]>r;p--)e[p]=e[p-1];e[p]=[n,a,r]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.p="/VenaEnergy_DisplayWeb/"}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,r,i=n[0],l=n[1],s=n[2],c=0;if(i.some(function(t){return 0!==e[t]})){for(a in l)o.o(l,a)&&(o.m[a]=l[a]);if(s)var p=s(o)}for(t&&t(n);c<i.length;c++)r=i[c],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(p)},n=self["webpackChunkweb"]=self["webpackChunkweb"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[504],function(){return o(2290)});n=o.O(n)})();
//# sourceMappingURL=app.7fb75c7e.js.map