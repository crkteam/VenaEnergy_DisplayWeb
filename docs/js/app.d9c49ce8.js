(function(){"use strict";var e={4398:function(e,t,n){var o=n(5130),a=n(6768);const i={class:"relative w-full h-full"};function r(e,t,n,o,r,s){const l=(0,a.g2)("TopLayer"),c=(0,a.g2)("BottomLayer");return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.bF)(l,{class:"absolute top-0 left-0 z-10"}),(0,a.bF)(c,{class:"absolute top-0 left-0 z-0"})])}n(4114),n(8111),n(7588);var s=n(144),l=n(8371),c=(n(1701),n(8776)),u=n(3191);class p{createCamera(e,t){const n=e.x/e.y,o=10,a=new l.qUd(o*n/-2,o*n/2,o/2,o/-2,.1,1e3);return a.position.set(t.x,t.y,t.z),a.lookAt(0,0,0),a}createRenderer(e){const t=new c.JeP({antialias:!0,alpha:!0});return t.setSize(e.x,e.y),t.shadowMap.enabled=!0,t.shadowMap.type=l.Wk7,t}addLight(e){const t=new l.$p8(16777215,.5);e.add(t);const n=new l.ZyN(16777215,1.25);n.position.set(-1.25,5.5,5),n.lookAt(0,0,0),n.castShadow=!0,n.shadow.mapSize.width=2048,n.shadow.mapSize.height=2048,n.shadow.camera.left=-12,n.shadow.camera.right=12,n.shadow.camera.top=12,n.shadow.camera.bottom=-12,n.shadow.camera.near=1,n.shadow.camera.far=30,e.add(n);const o=new l.ZyN(16777215,.35);o.position.set(2.5,5.5,-2.5),o.lookAt(0,0,0),e.add(o)}createFBX(e,t){return new Promise((n,o)=>{const a=new u.w,i=new l.Tap,r=i.load("./model/basetexture.jpg"),s=i.load("./model/floortexture.jpg"),c=i.load("./model/unchangetexture.jpg");a.load("./model/Area_"+e+".fbx",o=>{o.traverse(e=>{if(e.castShadow=!0,e.receiveShadow=!0,e instanceof l.eaF){const t=Array.isArray(e.material)?e.material:[e.material],n=t.map(e=>"lambert1"===e.name?new l._4j({color:16777215,map:s}):"lambert2"===e.name?new l._4j({map:c}):new l._4j({color:16777215,map:r}));e.material=Array.isArray(e.material)?n:n[0]}}),o.position.set(t.x,t.y,t.z);const a=.075;o.scale.set(a,a,a),o.userData.type=e,n(o)},void 0,e=>{console.error("載入 FBX 時發生錯誤:",e),o(e)})})}}var d=n(4968);const v=.5,f=.3,w=.1;var y=(0,a.pM)({__name:"BottomLayer",setup(e){const t=(0,s.KR)(null);let n,o,i,r,c,u=[],y=new l.Pq0(5.5,6.5,10),h=new l.Pq0(5.5,6.5,10),m={x:0,y:0},x=!1,b=new l.Pq0(0,0,0),k=!0;const g=new l.Pq0(5.5,15,10),A=new l.Pq0(0,5,2.5),L=[{type:"A",position:new l.Pq0(-2.5,0,-1.5),cameraPosition:new l.Pq0(-.5,4.5,7.5)},{type:"B",position:new l.Pq0(-2.5,0,4.5),cameraPosition:new l.Pq0(-2.5,6.5,12)},{type:"C",position:new l.Pq0(4,0,-1.5),cameraPosition:new l.Pq0(4,6.5,8)},{type:"D",position:new l.Pq0(5,0,4.5),cameraPosition:new l.Pq0(5,6.5,12)}],P=L.reduce((e,t)=>(e[t.type]={position:t.cameraPosition,lookAt:t.position},e),{});(0,a.sV)(()=>{O(),F()}),(0,a.xo)(()=>{window.removeEventListener("resize",X),window.removeEventListener("keydown",B),t.value?.removeEventListener("click",j),t.value?.removeEventListener("mousemove",_),i&&i.dispose(),d.Ay.killTweensOf(o.position),d.Ay.killTweensOf(b)});const O=async()=>{if(!t.value)return;r=new l.tBo,c=new l.I9Y,n=new l.Z58,n.background=new l.Q1f(15791352);let e=new p,a=new l.I9Y(t.value.clientWidth,t.value.clientHeight);o=e.createCamera(a,g),b.copy(A),i=e.createRenderer(a),t.value.appendChild(i.domElement),e.addLight(n),await E(e),z(),window.addEventListener("resize",X),window.addEventListener("keydown",B),t.value.addEventListener("click",j),t.value.addEventListener("mousemove",_)},z=()=>{k=!0,d.Ay.to(o.position,{x:y.x,y:y.y,z:y.z,duration:2,ease:"power2.out",onComplete:()=>{k=!1}}),d.Ay.to(b,{x:0,y:0,z:0,duration:2.5,ease:"power2.out"})},E=async e=>{const t=L.map(t=>e.createFBX(t.type,t.position)),o=await Promise.all(t);o.forEach(e=>{n.add(e),u.push(e)})},_=e=>{if(!t.value)return;if(k)return;const n=t.value.getBoundingClientRect(),o=(e.clientX-n.left)/n.width*2-1,a=-(e.clientY-n.top)/n.height*2+1,i=x?f:v;m.x=o*i,m.y=a*i},j=e=>{if(!t.value)return;if(k)return;const n=t.value.getBoundingClientRect();c.x=(e.clientX-n.left)/n.width*2-1,c.y=-(e.clientY-n.top)/n.height*2+1,r.setFromCamera(c,o);const a=r.intersectObjects(u,!0);if(a.length>0){let e=a[0].object;while(e.parent&&!e.userData.type)e=e.parent;q(e)}},q=e=>{const t=e.userData.type;console.log("點擊了:",t),C(t)},C=e=>{const t=P[e];t?(x=!0,h=t.position.clone(),d.Ay.killTweensOf(o.position),d.Ay.killTweensOf(b),d.Ay.to(o.position,{x:t.position.x,y:t.position.y,z:t.position.z,duration:1,ease:"power2.inOut"}),d.Ay.to(b,{x:t.lookAt.x,y:t.lookAt.y,z:t.lookAt.z,duration:1,ease:"power2.inOut"}),console.log(`相機鎖定到 Area ${e}`)):console.warn(`找不到 area ${e} 的相機配置`)},T=()=>{x=!1,d.Ay.killTweensOf(o.position),d.Ay.killTweensOf(b),d.Ay.to(o.position,{x:y.x,y:y.y,z:y.z,duration:1,ease:"power2.inOut"}),d.Ay.to(b,{x:0,y:0,z:0,duration:1,ease:"power2.inOut"}),console.log("相機解鎖,恢復到初始視角")},B=e=>{"Escape"===e.key&&x&&T()},F=()=>{if(requestAnimationFrame(F),!k){const e=x?h:y,t=e.x+m.x,n=e.y+m.y;o.position.x+=(t-o.position.x)*w,o.position.y+=(n-o.position.y)*w}o.lookAt(b),i.render(n,o)},X=()=>{if(!t.value)return;const e=t.value.clientWidth/t.value.clientHeight,n=10;o instanceof l.qUd&&(o.left=n*e/-2,o.right=n*e/2,o.top=n/2,o.bottom=n/-2,o.updateProjectionMatrix()),i.setSize(t.value.clientWidth,t.value.clientHeight)};return(e,n)=>((0,a.uX)(),(0,a.CE)("div",{ref_key:"container",ref:t,class:"w-full h-full"},null,512))}});const h=y;var m=h,x=n(4232),b=n.p+"img/sun.03ff91cd.svg";const k={class:"absolute top-[2.5vh] left-[2.5vh] w-[32vh] h-[17.5vh] bg-[#fafafa50] backdrop-blur-sm border border-white/30 rounded-xl p-[2vh] flex flex-row justify-between"},g={class:"flex flex-col justify-between"},A={class:"text-[1.5vh] text-c-black/80"},L={class:"text-[1.5vh] text-c-black/80"},P={class:"text-[4.5vh] font-bold text-c-black/80"};var O=(0,a.pM)({__name:"WeatherBlock",setup(e){const t=(0,s.KR)({date:"2025.01.01",day:"(一)",location:"桃園場",temp:27,condition:"Sunny"});return(e,n)=>((0,a.uX)(),(0,a.CE)("div",k,[(0,a.Lk)("div",g,[(0,a.Lk)("div",null,[(0,a.Lk)("div",A,(0,x.v_)(t.value.date)+" "+(0,x.v_)(t.value.day),1),(0,a.Lk)("div",L,(0,x.v_)(t.value.location),1)]),(0,a.Lk)("div",null,[(0,a.Lk)("span",P,(0,x.v_)(t.value.temp),1),n[0]||(n[0]=(0,a.Lk)("span",{class:"text-[2.5vh] text-c-black/80"},"°C",-1))])]),n[1]||(n[1]=(0,a.Lk)("img",{src:b,alt:"sun",class:"w-[14.5vh] h-auto"},null,-1))]))}});const z=O;var E=z,_=(0,a.pM)({__name:"TopLayer",setup(e){return(e,t)=>((0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(E)]))}});const j=_;var q=j,C=(0,a.pM)({name:"App",components:{TopLayer:q,BottomLayer:m}}),T=n(1241);const B=(0,T.A)(C,[["render",r]]);var F=B;(0,o.Ef)(F).mount("#ve-app")}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,i){if(!o){var r=1/0;for(u=0;u<e.length;u++){o=e[u][0],a=e[u][1],i=e[u][2];for(var s=!0,l=0;l<o.length;l++)(!1&i||r>=i)&&Object.keys(n.O).every(function(e){return n.O[e](o[l])})?o.splice(l--,1):(s=!1,i<r&&(r=i));if(s){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[o,a,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.p="/VenaEnergy_DisplayWeb/"}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,i,r=o[0],s=o[1],l=o[2],c=0;if(r.some(function(t){return 0!==e[t]})){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(l)var u=l(n)}for(t&&t(o);c<r.length;c++)i=r[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},o=self["webpackChunkweb"]=self["webpackChunkweb"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],function(){return n(4398)});o=n.O(o)})();
//# sourceMappingURL=app.d9c49ce8.js.map